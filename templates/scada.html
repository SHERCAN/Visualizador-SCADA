{% include 'head.html' %}
{% include 'spinner.html' %}
{% include 'sidebar.html' %}

<!-- Content Start -->
<div class="content">
    {% include 'navbar.html' %}

    <!-- ----------------------------- -->
    <div class="container-fluid pt-4 px-4">
        <div class="grilla-visual">
            <div class="row"></div>
            <div class="grilla-item1 grilla">
                <div class="bg-secondary rounded h-33 p-3 llenado">
                    <h6 class="mb-4">PV</h6>
                    <div class="numbersUpdate">
                        <h3 class="mb-1 text-center text-primary" id="PV1InputPower">150</h3>
                        <h3 class="mb-1 text-center text-primary">
                            <span style="margin-left: 10px;"> W</span>
                    </div>
                </div>
            </div>
            <div class="row"></div>
            <div class="row"></div>
            <div class="grilla-item2 grilla">
                <div class="bg-secondary rounded h-33 p-3 recuadro">
                    <div class="row">
                        <div class="col">
                            <img src="{{ url_for('static', path='img/Grid Logo.png') }}" alt="Grid logo"
                                style="vertical-align: middle">
                        </div>
                        <div class="col">
                            <h6 class="mb-4" style="vertical-align: middle">Grid</h6>
                        </div>
                    </div>
                    <div class="col">
                        <div class="numbersUpdate">
                            <h3 class="mb-1 text-center text-primary" id="loadSideTotalPower">150</h3>
                            <h3 class="mb-1 text-center text-primary">
                                <span style="margin-left: 10px;"> W</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="grilla-item3 grilla">
                <div class="bg-secondary rounded h-33 p-3 llenado">
                    <h6 class="mb-4">Inverter</h6>
                </div>
            </div>
            <div class="grilla-item4 grilla">
                <div class="bg-secondary rounded h-33 p-3 llenado">
                    <h6 class="mb-4">Smart panel</h6>
                </div>
            </div>
            <div class="grilla-item5 grilla">
                <div class="bg-secondary rounded h-33 p-3 llenado">
                    <h6 class="mb-4">Load</h6>
                    <div class="numbersUpdate">
                        <h3 class="mb-1 text-center text-primary" id="inverterOutputTotalPower">150</h3>
                        <h3 class="mb-1 text-center text-primary">
                            <span style="margin-left: 10px;"> W</span>
                    </div>
                </div>
            </div>
            <div class="row"></div>
            <div class="grilla-item6 grilla">
                <div class="bg-secondary rounded h-33 p-3 llenado">
                    <h6 class="mb-4">Battery</h6>
                    <div class="numbersUpdate">
                        <h3 class="mb-1 text-center text-primary" id="batteryCapacitySOC">150</h3>
                        <h3 class="mb-1 text-center text-primary">
                            <span style="margin-left: 10px;"> %</span>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <script>
        async function getData() {
            try {
                const response = await fetch('http://localhost:8000/info');
                // const response = await fetch('http://shercan.ga/info');
                const data = await response.json();
                data.forEach((key) => {
                    // intenta acceder a las propiedades name y value del objeto key
                    document.getElementById(key.name).innerHTML = key.value;
                });
            }
            catch (error) {
                console.error(error);

            }
        }
        setInterval(getData, 250);
    </script>
    <!-- Recent Sales End -->
    {% include 'select.html' %}
    {% include 'footer.html' %}